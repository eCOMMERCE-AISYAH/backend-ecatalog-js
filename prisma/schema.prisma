generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider = "mysql"
	url      = env("DATABASE_URL")
}

model Product {
	id            String         @id @default(uuid()) @db.VarChar(100)
	name          String         @db.VarChar(200)
	description   String         @db.Text
	stock         Int            @db.SmallInt
	price         Int
	subCategoryId String         @db.VarChar(100)
	subCategory   SubCategory    @relation(fields: [subCategoryId], references: [id])
	createdAt     DateTime       @default(now())
	updatedAt     DateTime       @updatedAt
	images        ProductImage[]
	CartProduct   CartProduct[]
}

model ProductImage {
	id        String   @id @default(uuid()) @db.VarChar(100)
	image     String   @db.VarChar(100)
	productId String   @db.VarChar(100)
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	product   Product  @relation(fields: [productId], references: [id])
}

model SubCategory {
	id         String    @id @default(uuid()) @db.VarChar(100)
	name       String    @db.VarChar(100)
	createdAt  DateTime  @default(now())
	updatedAt  DateTime  @updatedAt
	categoryId String    @db.VarChar(100)
	category   Category  @relation(fields: [categoryId], references: [id])
	products   Product[]
}

model Category {
	id            String        @id @default(uuid()) @db.VarChar(100)
	name          String        @db.VarChar(100)
	createdAt     DateTime      @default(now())
	updatedAt     DateTime      @updatedAt
	subCategories SubCategory[]
}

model Cart {
	id          String        @id @default(uuid()) @db.VarChar(100)
	sessionId   String        @db.VarChar(150)
	createdAt   DateTime      @default(now())
	updatedAt   DateTime      @updatedAt
	CartProduct CartProduct[]
	order       Order[]
}

model CartProduct {
	id        String   @id @default(uuid()) @db.VarChar(100)
	quantity  Int      @db.SmallInt
	notes     String?
	status    Boolean
	createdAt DateTime @default(now())
	updatedAt DateTime @updatedAt
	cartId    String   @db.VarChar(100)
	cart      Cart     @relation(fields: [cartId], references: [id])
	productId String   @db.VarChar(100)
	product   Product  @relation(fields: [productId], references: [id])
}

model Order {
	id            String      @id @default(uuid()) @db.VarChar(100)
	quantity      Int         @db.SmallInt
	totalPrice    Int
	createdAt     DateTime    @default(now())
	updatedAt     DateTime    @updatedAt
	orderDetailId String      @db.VarChar(100)
	orderDetail   OrderDetail @relation(fields: [orderDetailId], references: [id])
	cartId        String      @db.VarChar(100)
	cart          Cart        @relation(fields: [cartId], references: [id])
}

model OrderDetail {
	id          String   @id @default(uuid()) @db.VarChar(100)
	name        String   @db.VarChar(100)
	phoneNumber String   @db.VarChar(20)
	address     String   @db.VarChar(200)
	notes       String   @db.Text
	total       Int
	createdAt   DateTime @default(now())
	updatedAt   DateTime @updatedAt
	orders      Order[]
}
